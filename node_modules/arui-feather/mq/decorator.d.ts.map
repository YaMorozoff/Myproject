{"version":3,"sources":["mq/decorator.ts"],"names":[],"mappings":"AASA,UAAU,cAAc;IACpB,CAAC,SAAS,SAAS,QAAQ,EAAE,MAAM,EAAE,SAAS,GAAG,SAAS,GAAG,IAAI,CAAC;CACrE;AAMD,MAAM,CAAC,OAAO,UAAU,WAAW,CAAC,KAAK,EAAE,MAAM,EAAE,QAAQ,SAAY,GAAG,cAAc,CAqCvF","file":"decorator.d.ts","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n// @ts-nocheck\n\nimport React from 'react';\nimport { getMatchMedia, releaseMatchMedia } from '../lib/match-media';\n\ninterface ClassDecorator {\n    <TFunction extends Function>(target: TFunction): TFunction | void;\n}\n\ntype MqDecoratorState = {\n    matched: boolean;\n}\n\nexport default function mqDecorator(query: string, propName = 'mqMatch'): ClassDecorator {\n    return function (Component: React.ComponentType) {\n        return class extends React.Component<{}, MqDecoratorState> {\n            mql: MediaQueryList | null = null;\n\n            state = {\n                matched: false,\n            };\n\n            componentDidMount() {\n                this.mql = getMatchMedia(query);\n                this.handleMatchChange(this.mql);\n                // TODO: depricated => change to addEventListener\n                this.mql.addListener(this.handleMatchChange);\n            }\n\n            componentWillUnmount() {\n                releaseMatchMedia(query);\n                // TODO: depricated => change to removeEventListener\n                this.mql.removeListener(this.handleMatchChange);\n                this.mql = null;\n            }\n\n            render() {\n                return React.createElement(Component, {\n                    ...this.props,\n                    [propName]: this.state.matched,\n                });\n            }\n\n            handleMatchChange = (mql: MediaQueryListEvent) => {\n                this.setState({\n                    matched: mql.matches,\n                });\n            }\n        };\n    };\n}\n"]}