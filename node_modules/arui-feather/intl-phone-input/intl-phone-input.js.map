{"version":3,"sources":["intl-phone-input/intl-phone-input.tsx"],"names":[],"mappings":"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","file":"intl-phone-input.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n// @ts-nocheck\n\nimport React from 'react';\nimport { createCn } from 'bem-react-classname';\nimport { withTheme } from '../cn';\n\nimport FlagIcon from '../flag-icon/flag-icon';\nimport Input, { InputProps } from '../input/input';\nimport Select from '../select/select';\n\nimport countries from '../lib/countries';\nimport getRelatedTarget from '../lib/related-target';\n\nconst MAX_DIAL_CODE_LENGTH = 4;\n\nexport type IntlPhoneInputProps = InputProps;\n\ntype IntlPhoneInputState = {\n    countryIso2: string;\n    inputFocused: boolean;\n    inputValue: string;\n    selectFocused: boolean;\n    onceOpened: boolean;\n}\n\n/**\n * Компонент ввода международного телефона по маске.\n */\nexport class IntlPhoneInput extends React.PureComponent<IntlPhoneInputProps, IntlPhoneInputState> {\n    protected cn = createCn('intl-phone-input');\n\n    static defaultProps: Partial<IntlPhoneInputProps> = {\n        size: 'm',\n        value: '+7',\n    };\n\n    state = {\n        countryIso2: 'ru',\n        inputFocused: false,\n        inputValue: this.props.value,\n        selectFocused: false,\n        onceOpened: false,\n    };\n\n    private countries;\n\n    // TODO [issues/1018] переписать тесты нужно, что бы private был\n    input;\n\n    private select;\n\n    private timeoutId;\n\n    private util;\n\n    private asYouType;\n\n    async componentDidMount() {\n        await this.loadUtil();\n        this.setCountry();\n    }\n\n    // eslint-disable-next-line camelcase\n    UNSAFE_componentWillUpdate(nextProps, nextState) {\n        if (this.state.inputValue !== nextState.inputValue) {\n            if (this.props.onChange) {\n                this.props.onChange(nextState.inputValue);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = null;\n        }\n    }\n\n    render() {\n        return (\n            <Input\n                className={ this.cn() }\n                ref={ (input) => {\n                    this.input = input;\n                } }\n                { ...this.props }\n                focused={ this.state.inputFocused || this.state.selectFocused }\n                leftAddons={ (\n                    <Select\n                        className={ this.cn('select') }\n                        ref={ (select) => {\n                            this.select = select;\n                        } }\n                        disabled={ this.props.disabled }\n                        mode=\"radio\"\n                        options={ this.getOptions() }\n                        popupSecondaryOffset={ this.getSelectPopupOffset() }\n                        renderButtonContent={ this.renderSelectButtonContent }\n                        size={ this.props.size }\n                        value={ [this.state.countryIso2] }\n                        onBlur={ this.handleSelectBlur }\n                        onChange={ this.handleSelectChange }\n                        onClick={ this.handleSelectClick }\n                        onFocus={ this.handleSelectFocus }\n                        onButtonFocus={ this.handleSelectButtonFocus }\n                        onButtonBlur={ this.handleSelectButtonBlur }\n                    />\n                ) }\n                noValidate={ true }\n                type=\"tel\"\n                value={ this.getValue() }\n                onBlur={ this.handleInputBlur }\n                onChange={ this.handleInputChange }\n                onFocus={ this.handleInputFocus }\n            />\n        );\n    }\n\n    renderFlagIcon(countryIso2: string) {\n        return (\n            <FlagIcon\n                country={ countryIso2 }\n                mode={ this.state.onceOpened ? 'sprite' : 'chunk' }\n                size={ this.props.size }\n            />\n        );\n    }\n\n    private renderSelectButtonContent = () => this.renderFlagIcon(this.state.countryIso2);\n\n    private handleSelectFocus = (event) => {\n        if (!this.state.onceOpened) {\n            this.setState({\n                onceOpened: true,\n            });\n        }\n\n        this.resolveFocusedState({ selectFocused: true }, event);\n    };\n\n    private handleSelectButtonFocus = () => {\n        this.setState({\n            selectFocused: true,\n        });\n    };\n\n    private handleSelectBlur = (event) => {\n        this.resolveFocusedState({ selectFocused: false }, event);\n    };\n\n    private handleSelectButtonBlur = (event) => {\n        this.resolveFocusedState({ selectFocused: false }, event);\n    };\n\n    private handleSelectChange = (value) => {\n        const inputValue = `+${this.countries.find((country) => country.iso2 === value[0]).dialCode}`;\n\n        this.setState({\n            countryIso2: value[0],\n            inputValue,\n        }, () => {\n            // Wait for select blur, then focus on input\n            this.timeoutId = setTimeout(() => {\n                this.input.focus();\n                this.input.setSelectionRange(inputValue.length);\n            }, 0);\n        });\n    };\n\n    private handleSelectClick = () => {\n        // Set focus to input on select closing by it's button toggle\n        if (this.state.selectFocused) {\n            this.input.focus();\n            this.input.setSelectionRange(-1);\n        }\n    };\n\n    private handleInputFocus = (event) => {\n        this.resolveFocusedState({ inputFocused: true }, event);\n    };\n\n    private handleInputBlur = (event) => {\n        this.resolveFocusedState({ inputFocused: false }, event);\n    };\n\n    private handleInputChange = (value) => {\n        this.setState({\n            inputValue: value.length === 1 && value !== '+' ? `+${value}` : value,\n        }, this.setCountry);\n    };\n\n    // TODO: торчит для теста\n    getOptions = () => {\n        this.countries = countries.getCountries();\n\n        return this.state.onceOpened ? this.countries.map((country) => ({\n            value: country.iso2,\n            text: (\n                <span>\n                    { country.name }\n                    <span className={ this.cn('select-option-code') }>\n                        +\n                        { country.dialCode }\n                    </span>\n                </span>\n            ),\n            nativeText: `${country.name} +${country.dialCode}`,\n            icon: (\n                <span className={ this.cn('select-option-flag') }>\n                    { this.renderFlagIcon(country.iso2) }\n                </span>\n            ),\n        })) : [];\n    };\n\n    private getSelectPopupOffset() {\n        switch (this.props.size) {\n        case 's': return -18;\n        case 'm': return -24;\n        case 'l': return -27;\n        case 'xl': return -28;\n        }\n\n        return 0;\n    }\n\n    private getValue() {\n        // Use value from state not props, cause of some formatting steps in component\n        // Sync props.value with state.inputValue in UNSAFE_componentWillUpdate\n        return this.state.inputValue;\n    }\n\n    // TODO: торчит для теста\n    loadUtil() {\n        return import(/* webpackChunkName: \"libphonenumber\" */ 'libphonenumber-js/bundle/libphonenumber-js.min')\n            .then((util) => {\n                this.util = util;\n            })\n            .catch((error) => `An error occurred while loading libphonenumber-js:\\n${error}`);\n    }\n\n    private resolveFocusedState(nextFocusedStateItem, event) {\n        const focusedState = {\n            inputFocused: this.state.inputFocused,\n            selectFocused: this.state.selectFocused,\n        };\n\n        const relatedTarget = getRelatedTarget(event);\n        const hasMatchedRelatedTarget = relatedTarget === event.target;\n        let hasSelectRelatedTarget = false;\n        let isSwitchBetweenRelatedTargers = false;\n\n        // Check classNames matching in select's button (relatedTarget) & menu (focused target)\n        if (relatedTarget.classList && event.target.classList) {\n            hasSelectRelatedTarget = Array.from(relatedTarget.classList).some((item) => /select/.test(item))\n                === Array.from(event.target.classList).some((item) => /select/.test(item));\n\n            isSwitchBetweenRelatedTargers = !Object.values(focusedState).some((item) => item)\n                && !Array.from(event.target.classList).some((item) => /select/.test(item))\n                && Array.from(relatedTarget.classList).some((item) => /select/.test(item));\n        }\n\n        if (event.type === 'focus') {\n            if (hasMatchedRelatedTarget || hasSelectRelatedTarget || isSwitchBetweenRelatedTargers) {\n                // If we have smth already focused, do not do anything\n                const alreadyInFocus = Object.values(focusedState).some((item) => item);\n\n                if (!alreadyInFocus) {\n                    this.setState(nextFocusedStateItem);\n\n                    if (this.props.onFocus) {\n                        this.props.onFocus(event);\n                    }\n                }\n            }\n        }\n\n        if (event.type === 'blur') {\n            if (!hasMatchedRelatedTarget) {\n                // Set all values in focusedState to false cause we are blurring now\n                this.setState(\n                    Object.keys(focusedState).reduce((result, item) => {\n                        result[item] = false;\n\n                        return result;\n                    }, {}),\n                );\n\n                if (this.props.onBlur) {\n                    this.props.onBlur(event);\n                }\n            }\n        }\n    }\n\n    private setCountry() {\n        const inputValue = this.getValue().replace(/ /g, '');\n\n        for (let i = 0; i < this.countries.length; i++) {\n            const country = this.countries[i];\n\n            if (new RegExp(`^\\\\+${country.dialCode}`).test(inputValue)) {\n                // Handle countries with priority field\n                if (country.priority === undefined) {\n                    this.setValue(country.iso2, inputValue);\n                    break;\n                }\n\n                // Check max dial code length to allow country change\n                // For countries with identical dial codes or North American Numbering Plan (NANP)\n                if (inputValue.length < MAX_DIAL_CODE_LENGTH) {\n                    // Update only value if countries are equal\n                    if (this.state.countryIso2 === country.iso2) {\n                        this.setValue(country.iso2, inputValue);\n                        break;\n                    // If not equal — set highest by priority\n                    } else if (country.priority === 0) {\n                        this.setValue(country.iso2, inputValue);\n                        break;\n                    }\n                // Otherwise don't change already selected country, just set value\n                } else if (this.state.countryIso2 === country.iso2) {\n                    this.setValue(country.iso2, inputValue);\n                    break;\n                }\n            }\n        }\n    }\n\n    private setValue(countryIso2, inputValue) {\n        this.asYouType = this.util ? new this.util.AsYouType(countryIso2.toUpperCase()) : null;\n        this.setState({\n            inputValue: this.asYouType ? this.asYouType.input(inputValue) : inputValue,\n            countryIso2,\n        });\n    }\n\n    /**\n     * Возвращает ссылку на HTMLElement инпута.\n     */\n    public getControl(): HTMLInputElement {\n        return this.input.getControl();\n    }\n\n    /**\n     * Устанавливает фокус на поле ввода.\n     */\n    public focus() {\n        this.input.focus();\n    }\n\n    /**\n     * Убирает фокус с поля ввода.\n     */\n    public blur() {\n        this.input.blur();\n    }\n\n    /**\n     * Скроллит страницу до поля ввода.\n     */\n    public scrollTo() {\n        this.input.scrollTo();\n    }\n}\n\nexport default withTheme<IntlPhoneInputProps, IntlPhoneInput>(IntlPhoneInput);\n"]}