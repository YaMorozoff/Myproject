{"version":3,"sources":["radio-group/radio-group.tsx"],"names":[],"mappings":";AAAA;;8DAE8D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE9D,8FAA0D;AAC1D,gDAA0B;AAC1B,2DAA+C;AAC/C,4BAAkC;AAuFlC;;GAEG;AACH;IAAgC,8BAAoC;IAApE;QAAA,qEAmIC;QAlIa,QAAE,GAAG,8BAAQ,CAAC,aAAa,CAAC,CAAC;QAOvC,WAAK,GAAG;YACJ,KAAK,EAAE,EAAE;SACZ,CAAC;QAiFM,uBAAiB,GAAG,UAAC,KAAK;YAC9B,IAAI,KAAI,CAAC,KAAK,CAAC,KAAK,KAAK,KAAK,EAAE;gBAC5B,KAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,OAAA,EAAE,CAAC,CAAC;aAC5B;YAED,IAAI,KAAI,CAAC,KAAK,CAAC,KAAK,KAAK,KAAK,IAAI,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACnD,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC9B;QACL,CAAC,CAAC;QAEM,iBAAW,GAAG,UAAC,KAAK;YACxB,IAAI,KAAI,CAAC,KAAK,CAAC,OAAO,EAAE;gBACpB,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;aAC7B;QACL,CAAC,CAAC;QAEM,gBAAU,GAAG,UAAC,KAAK;YACvB,IAAI,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE;gBACnB,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;aAC5B;QACL,CAAC,CAAC;;IAoBN,CAAC;IApHG,2BAAM,GAAN;QAAA,iBA0EC;QAzEG,IAAI,QAAQ,GAAoB,IAAI,CAAC;QAC/B,IAAA,eAA2B,EAAzB,cAAI,EAAE,cAAmB,CAAC;QAClC,IAAI,KAAK,GAA0E,EAAE,IAAI,MAAA,EAAE,CAAC;QAC5F,IAAM,eAAe,GAAG,EAAE,CAAC;QAE3B,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,KAAK,SAAS,EAAE;YACnC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;SACxC;QAED,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACb,IAAA,mCAAuB,CAAgB;YAE/C,QAAQ,GAAG,eAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;SACpD;QAED,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;YAC9B,KAAK,yBAAQ,KAAK,KAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAE,CAAC;SACjD;QAED,IAAI,QAAQ,EAAE;YACV,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAM,OAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAEnF,eAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAC,KAAK,EAAE,KAAK;gBAC1C,IAAI,eAAK,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;oBAC7B,eAAe,CAAC,WAAS,KAAO,CAAC,GAAG,eAAK,CAAC,YAAY,CAAC,KAAK,aACxD,GAAG,EAAE,UAAC,KAAK,IAAK,OAAA,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAvB,CAAuB,EACvC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,EACtF,OAAO,EAAE,CACL,KAAK,CAAC,KAAK,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,OAAK,KAAK,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAC1F,EACD,QAAQ,EAAE,KAAK,CAAC,KAAK,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,KAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,IACzF,KAAK,EACV,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;SACN;QAED,OAAO,CACH,uCACI,SAAS,EACF,IAAI,CAAC,EAAE,YACN,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EACrB,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAC3B,IAAI,MAAA,IACD,KAAK,EACV,uBAAiB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE,CAAE,EAEzE,IAAI,EAAC,OAAO,EACZ,QAAQ,EAAG,CAAC,CAAC,EACb,OAAO,EAAG,IAAI,CAAC,WAAW,EAC1B,MAAM,EAAG,IAAI,CAAC,UAAU,kBACT,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC;YAEzC,uCAAK,SAAS,EAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC;gBAEzB,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK;uBACf,uCAAK,SAAS,EAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAQ;gBAEnE,uCAAK,SAAS,EAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IACzB,sCAAc,CAAC,eAAe,CAAC,CAC/B;gBAEF,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;uBAClC,CACC,wCAAM,SAAS,EAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAC1B,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAClC,CACV,CAEH,CACJ,CACT,CAAC;IACN,CAAC;IAwBD;;OAEG;IACI,0BAAK,GAAZ;QACI,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAC/B,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SAC1B;IACL,CAAC;IAED;;OAEG;IACH,kDAAkD;IAC3C,yBAAI,GAAX;QACI,IAAI,QAAQ,CAAC,aAAa,YAAY,WAAW,EAAE;YAC/C,QAAQ,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;SACjC;IACL,CAAC;IA/HM,uBAAY,GAA6B;QAC5C,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,GAAG;KACZ,CAAC;IA6HN,iBAAC;CAnID,AAmIC,CAnI+B,eAAK,CAAC,aAAa,GAmIlD;AAnIY,gCAAU;AAqIvB,kBAAe,cAAS,CAA8B,UAAU,CAAC,CAAC","file":"radio-group.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport createFragment from 'react-addons-create-fragment';\nimport React from 'react';\nimport { createCn } from 'bem-react-classname';\nimport { withTheme } from '../cn';\nimport { Radio } from '../radio/radio';\n\nexport type RadioGroupProps = {\n\n    /**\n     * Тип группы кнопок\n     */\n    type?: 'normal' | 'button' | 'line';\n\n    /**\n     * Значение выбранной радио-кнопки\n     */\n    value?: string;\n\n    /**\n     * Отображение попапа с ошибкой в момент когда фокус находится на компоненте\n     */\n    error?: React.ReactNode;\n\n    /**\n     * Размеры pub и sub\n     */\n    size?: 's' | 'm' | 'l' | 'xl';\n\n    /**\n     * Управление шириной группы кнопок для типа 'button'. При значении\n'available' растягивает группу на ширину родителя\n     */\n    width?: 'default' | 'available';\n\n    /**\n     * Уникальное имя блока\n     */\n    name?: string;\n\n    /**\n     * Управление возможностью изменения состояния 'checked' дочерних компонентов `Radio`\n     */\n    disabled?: boolean;\n\n    /**\n     * Дочерние элементы `RadioGroup`, как правило, компоненты `Radio`\n     */\n    children?: React.ReactNode;\n\n    /**\n     * Тема компонента\n     */\n    theme?: 'alfa-on-color' | 'alfa-on-white';\n\n    /**\n     * Дополнительный класс\n     */\n    className?: string;\n\n    /**\n     * Лейбл для группы\n     */\n    label?: React.ReactNode;\n\n    /**\n     * Подсказка под полем\n     */\n    hint?: React.ReactNode;\n\n    /**\n     * Обработчик фокуса радиогруппы\n     */\n    onFocus?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик снятия фокуса с радиогруппы\n     */\n    onBlur?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик изменения значения 'checked' одного из дочерних радио-кнопок\n     */\n    onChange?: (value?: string) => void;\n\n    /**\n     * Идентификатор для систем автоматизированного тестирования\n     */\n    'data-test-id'?: string;\n};\n\n/**\n * Компонент группы радио-кнопок.\n */\nexport class RadioGroup extends React.PureComponent<RadioGroupProps> {\n    protected cn = createCn('radio-group');\n\n    static defaultProps: Partial<RadioGroupProps> = {\n        type: 'normal',\n        size: 'm',\n    };\n\n    state = {\n        value: '',\n    };\n\n    // TODO [issues/1018] переписать тесты нужно, что бы private был\n    radios: Radio[];\n\n    render() {\n        let children: React.ReactNode = null;\n        const { size, name } = this.props;\n        let props: { name: string; disabled?: boolean; width?: 'default' | 'available' } = { name };\n        const radioGroupParts = {};\n\n        if (this.props.disabled !== undefined) {\n            props.disabled = this.props.disabled;\n        }\n\n        if (this.props.children) {\n            const { children: propsChildren } = this.props;\n\n            children = React.Children.toArray(propsChildren);\n        }\n\n        if (this.props.type === 'button') {\n            props = { ...props, width: this.props.width };\n        }\n\n        if (children) {\n            this.radios = [];\n            const value = this.props.value === undefined ? this.state.value : this.props.value;\n\n            React.Children.forEach(children, (radio, index) => {\n                if (React.isValidElement(radio)) {\n                    radioGroupParts[`radio-${index}`] = React.cloneElement(radio, {\n                        ref: (radio) => this.radios.push(radio),\n                        error: radio.props.error === undefined ? Boolean(this.props.error) : radio.props.error,\n                        checked: (\n                            radio.props.checked === undefined ? (value === radio.props.value) : radio.props.checked\n                        ),\n                        onChange: radio.props.onChange === undefined ? this.handleRadioChange : radio.props.onChange,\n                        ...props,\n                    });\n                }\n            });\n        }\n\n        return (\n            <div\n                className={\n                    `${this.cn({\n                        type: this.props.type,\n                        invalid: !!this.props.error,\n                        size,\n                        ...props,\n                    })} control-group${this.props.error ? ' control-group_invalid' : ''}`\n                }\n                role=\"group\"\n                tabIndex={ -1 }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n                data-test-id={ this.props['data-test-id'] }\n            >\n                <div className={ this.cn('inner') }>\n                    {\n                        !!this.props.label\n                        && <div className={ this.cn('top') }>{ this.props.label }</div>\n                    }\n                    <div className={ this.cn('box') }>\n                        { createFragment(radioGroupParts) }\n                    </div>\n                    {\n                        (this.props.error || this.props.hint)\n                        && (\n                            <span className={ this.cn('sub') }>\n                                { this.props.error || this.props.hint }\n                            </span>\n                        )\n                    }\n                </div>\n            </div>\n        );\n    }\n\n    private handleRadioChange = (value) => {\n        if (this.state.value !== value) {\n            this.setState({ value });\n        }\n\n        if (this.props.value !== value && this.props.onChange) {\n            this.props.onChange(value);\n        }\n    };\n\n    private handleFocus = (event) => {\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    };\n\n    private handleBlur = (event) => {\n        if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n    };\n\n    /**\n     * Устанавливает фокус на первую радиокнопку в группе.\n     */\n    public focus() {\n        if (this.radios && this.radios[0]) {\n            this.radios[0].focus();\n        }\n    }\n\n    /**\n     * Убирает фокус с группы радио-кнопок.\n     */\n    // eslint-disable-next-line class-methods-use-this\n    public blur() {\n        if (document.activeElement instanceof HTMLElement) {\n            document.activeElement.blur();\n        }\n    }\n}\n\nexport default withTheme<RadioGroupProps, RadioGroup>(RadioGroup);\n"]}