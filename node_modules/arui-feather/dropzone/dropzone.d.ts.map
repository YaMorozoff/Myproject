{"version":3,"sources":["dropzone/dropzone.tsx"],"names":[],"mappings":"AAMA,OAAO,KAAK,MAAM,OAAO,CAAC;AAI1B,oBAAY,aAAa,GAAG;IAExB;;OAEG;IACH,QAAQ,CAAC,EAAE,KAAK,CAAC,SAAS,CAAC;IAE3B;;OAEG;IACH,SAAS,CAAC,EAAE,MAAM,CAAC;IAEnB;;OAEG;IACH,cAAc,CAAC,EAAE,MAAM,CAAC;IAExB;;OAEG;IACH,EAAE,CAAC,EAAE,MAAM,CAAC;IAEZ;;OAEG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;IAEd;;OAEG;IACH,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,KAAK,IAAI,CAAC;IAEjC;;OAEG;IACH,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC;IAErD;;OAEG;IACH,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC;IAEtD;;OAEG;IACH,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC;IAEtD;;OAEG;IACH,KAAK,CAAC,EAAE,eAAe,GAAG,eAAe,CAAC;IAE1C;;OAEG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;CAEjB,CAAC;AAEF;;GAEG;AACH,qBAAa,QAAS,SAAQ,KAAK,CAAC,aAAa,CAAC,aAAa,CAAC;IAC5D,SAAS,CAAC,EAAE;;;;;;iBAAwB;IAEpC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,aAAa,CAAC,CAGzC;IAEF,KAAK;;MAEH;IAGF,IAAI,EAAE,eAAe,CAAC;IAEtB,OAAO,CAAC,WAAW,CAAS;IAE5B,OAAO,CAAC,cAAc,CAOrB;IAED,OAAO,CAAC,eAAe,CAYrB;IAEF,OAAO,CAAC,eAAe,CAarB;IAEF,OAAO,CAAC,UAAU,CAchB;IAEF,iBAAiB;IAIjB,MAAM;CAqBT;;AAED,wBAA4D","file":"dropzone.d.ts","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/* eslint-disable max-len */\n\nimport React from 'react';\nimport { createCn } from 'bem-react-classname';\nimport { withTheme } from '../cn';\n\nexport type DropzoneProps = {\n\n    /**\n     * Дочерние компоненты\n     */\n    children?: React.ReactNode;\n\n    /**\n     * Дополнительный класс\n     */\n    className?: string;\n\n    /**\n     * Идентификатор для систем автоматизированного тестирования\n     */\n    'data-test-id'?: string;\n\n    /**\n     * Уникальный идентификатор блока\n     */\n    id?: string;\n\n    /**\n     * Уникальное имя блока\n     */\n    name?: string;\n\n    /**\n     * Обработчик события 'drop'\n     */\n    onDrop?: (files?: any[]) => void;\n\n    /**\n     * Обработчик события 'dragover'\n     */\n    onDragOver?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик события 'dragleave'\n     */\n    onDragLeave?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик события 'dragenter'\n     */\n    onDragEnter?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Тема компонента\n     */\n    theme?: 'alfa-on-color' | 'alfa-on-white';\n\n    /**\n     * Текст-подсказка поверх drop-зоны\n     */\n    text?: string;\n\n};\n\n/**\n * Компонент drag-and-drop контейнер для прикрепления файлов.\n */\nexport class Dropzone extends React.PureComponent<DropzoneProps> {\n    protected cn = createCn('dropzone');\n\n    static defaultProps: Partial<DropzoneProps> = {\n        theme: 'alfa-on-white',\n        text: 'Поместите файлы сюда',\n    };\n\n    state = {\n        dragging: false,\n    };\n\n    // TODO [issues/1018] на private ругается\n    root: HTMLSpanElement;\n\n    private dragCounter: number;\n\n    private handleDragOver = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (this.props.onDragOver) {\n            this.props.onDragOver(event);\n        }\n    }\n\n    private handleDragEnter = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.dragCounter += 1;\n        if (event.dataTransfer.items && event.dataTransfer.items.length > 0) {\n            this.setState({ dragging: true });\n        }\n\n        if (this.props.onDragEnter) {\n            this.props.onDragEnter(event);\n        }\n    };\n\n    private handleDragLeave = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.dragCounter -= 1;\n        if (this.dragCounter > 0) {\n            return;\n        }\n        this.setState({ dragging: false });\n\n        if (this.props.onDragLeave) {\n            this.props.onDragLeave(event);\n        }\n    };\n\n    private handleDrop = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.setState({ dragging: false });\n\n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            if (this.props.onDrop) {\n                this.props.onDrop(event.dataTransfer.files);\n            }\n\n            event.dataTransfer.clearData();\n            this.dragCounter = 0;\n        }\n    };\n\n    componentDidMount() {\n        this.dragCounter = 0;\n    }\n\n    render() {\n        return (\n            <div\n                ref={ (root) => {\n                    this.root = root;\n                } }\n                id={ this.props.id }\n                data-test-id={ this.props['data-test-id'] }\n                className={ this.cn() }\n                onDragEnter={ this.handleDragEnter }\n                onDragLeave={ this.handleDragLeave }\n                onDragOver={ this.handleDragOver }\n                onDrop={ this.handleDrop }\n            >\n                <div className={ this.cn('view', { active: this.state.dragging }) }>\n                    { this.props.text }\n                </div>\n                { this.props.children }\n            </div>\n        );\n    }\n}\n\nexport default withTheme<DropzoneProps, Dropzone>(Dropzone);\n"]}