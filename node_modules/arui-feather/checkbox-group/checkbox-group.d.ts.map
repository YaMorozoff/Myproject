{"version":3,"sources":["checkbox-group/checkbox-group.tsx"],"names":[],"mappings":"AAKA,OAAO,KAAK,MAAM,OAAO,CAAC;AAI1B,oBAAY,2BAA2B,GAAG,eAAe,GAAG,eAAe,CAAC;AAE5E,oBAAY,kBAAkB,GAAG,CAAC;IAC9B;;OAEG;IACH,IAAI,EAAE,QAAQ,CAAC;IACf;;;OAGG;IACH,KAAK,CAAC,EAAE,SAAS,GAAG,WAAW,CAAC;CACnC,GAAG;IACA;;OAEG;IACH,IAAI,CAAC,EAAE,QAAQ,GAAG,MAAM,CAAC;CAC5B,CAAC,GAAG;IAED;;OAEG;IACH,KAAK,CAAC,EAAE,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC;IAEvC;;OAEG;IACH,IAAI,CAAC,EAAE,MAAM,CAAC;IAEd;;OAEG;IACH,QAAQ,CAAC,EAAE,OAAO,CAAC;IAEnB;;OAEG;IACH,QAAQ,CAAC,EAAE,KAAK,CAAC,SAAS,CAAC;IAE3B;;OAEG;IACH,KAAK,CAAC,EAAE,2BAA2B,CAAC;IAEpC;;OAEG;IACH,SAAS,CAAC,EAAE,MAAM,CAAC;IAEnB;;OAEG;IACH,EAAE,CAAC,EAAE,MAAM,CAAC;IAEZ;;OAEG;IACH,KAAK,CAAC,EAAE,KAAK,CAAC,SAAS,CAAC;IAExB;;OAEG;IACH,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC;IAElD;;OAEG;IACH,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC;IAEjD;;OAEG;IACH,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC;IAEnE;;OAEG;IACH,cAAc,CAAC,EAAE,MAAM,CAAC;CAE3B,CAAC;AAEF;;GAEG;AACH,qBAAa,aAAc,SAAQ,KAAK,CAAC,aAAa,CAAC,kBAAkB,CAAC;IACtE,SAAS,CAAC,EAAE;;;;;;iBAA8B;IAE1C,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,kBAAkB,CAAC,CAE9C;IAEF,KAAK;;MAEH;IAEF,OAAO,CAAC,UAAU,CAAQ;IAE1B,MAAM;IA0EN,OAAO,CAAC,oBAAoB,CAkB1B;IAEF,OAAO,CAAC,WAAW,CAIjB;IAEF,OAAO,CAAC,UAAU,CAIhB;IAEF;;OAEG;IACI,KAAK;IAMZ;;OAEG;IAEI,IAAI;CAKd;;IA1NG;;OAEG;;IAEH;;;OAGG;;;IASH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;;IA/DH;;OAEG;;;IAIH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;IAGH;;OAEG;;;AAmJP,wBAA2E","file":"checkbox-group.d.ts","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport createFragment from 'react-addons-create-fragment';\nimport React from 'react';\nimport { createCn } from 'bem-react-classname';\nimport { withTheme } from '../cn';\n\nexport type CheckBoxGroupThemeFieldType = 'alfa-on-color' | 'alfa-on-white';\n\nexport type CheckBoxGroupProps = ({\n    /**\n     * Тип компонента\n     */\n    type: 'button';\n    /**\n     * Управление шириной группы кнопок для типа 'button'. При значении\n     * 'available' растягивает группу на ширину родителя\n     */\n    width?: 'default' | 'available';\n} | {\n    /**\n     * Тип компонента\n     */\n    type?: 'normal' | 'line';\n}) & {\n\n    /**\n     * Выбранные чекбокс-кнопки\n     */\n    value?: ReadonlyArray<string | number>;\n\n    /**\n     * Уникальное имя блока\n     */\n    name?: string;\n\n    /**\n     * Управление возможностью изменения состояния 'checked' дочерних компонентов `CheckBox`\n     */\n    disabled?: boolean;\n\n    /**\n     * Дочерние элементы `CheckBoxGroup`, как правило, компоненты `CheckBox`\n     */\n    children?: React.ReactNode;\n\n    /**\n     * Тема компонента\n     */\n    theme?: CheckBoxGroupThemeFieldType;\n\n    /**\n     * Дополнительный класс\n     */\n    className?: string;\n\n    /**\n     * Идентификатор компонента в DOM\n     */\n    id?: string;\n\n    /**\n     * Лейбл для группы\n     */\n    label?: React.ReactNode;\n\n    /**\n     * Обработчик фокуса радиогруппы\n     */\n    onFocus?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик снятия фокуса с радиогруппы\n     */\n    onBlur?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик изменения значения 'checked' одного из дочерних радио-кнопок\n     */\n    onChange?: (value?: any[], event?: React.ChangeEvent<any>) => void;\n\n    /**\n     * Идентификатор для систем автоматизированного тестирования\n     */\n    'data-test-id'?: string;\n\n};\n\n/**\n * Компонент группы чекбоксов.\n */\nexport class CheckBoxGroup extends React.PureComponent<CheckBoxGroupProps> {\n    protected cn = createCn('checkbox-group');\n\n    static defaultProps: Partial<CheckBoxGroupProps> = {\n        type: 'normal',\n    };\n\n    state = {\n        value: [],\n    };\n\n    private checkboxes: any[];\n\n    render() {\n        let children: React.ReactNode = null;\n        let props: { name: string; disabled?: boolean; width?: 'default' | 'available' } = { name: this.props.name };\n        const checkboxGroupParts = {};\n\n        if (this.props.disabled !== undefined) {\n            props.disabled = this.props.disabled;\n        }\n\n        if (this.props.children) {\n            const { children: propsChildren } = this.props;\n\n            children = React.Children.toArray(propsChildren);\n        }\n\n        if (this.props.type === 'button') {\n            props = { ...props, width: this.props.width };\n        }\n\n        if (children) {\n            this.checkboxes = [];\n            const value = this.props.value === undefined ? this.state.value : this.props.value;\n\n            React.Children.forEach(children, (checkbox, index) => {\n                if (React.isValidElement(checkbox)) {\n                    const checkboxNode = React.cloneElement(checkbox, {\n                        ref: (checkbox) => this.checkboxes.push(checkbox),\n                        checked: checkbox.props.checked === undefined\n                            ? value.some((groupValue) => groupValue === checkbox.props.value)\n                            : checkbox.props.checked,\n                        onChange: checkbox.props.onChange === undefined\n                            ? (checked, _text, event) => this.handleCheckboxChange(checkbox.props.value, checked, event)\n                            : checkbox.props.onChange,\n                        ...props,\n                    });\n\n                    checkboxGroupParts[`checkbox-${index}`] = (this.props.type !== 'button' && this.props.type !== 'line')\n                        ? <div>{ checkboxNode }</div>\n                        : checkboxNode;\n                }\n            });\n        }\n\n        return (\n            <span\n                className={\n                    `${this.cn({\n                        type: this.props.type,\n                        disabled: props.disabled,\n                        width: props.width ? props.width : null,\n                    })} control-group`\n                }\n                id={ this.props.id }\n                role=\"group\"\n                tabIndex={ -1 }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n                data-test-id={ this.props['data-test-id'] }\n            >\n                {\n                    !!this.props.label\n                    && (\n                        <div className={ this.cn('label') }>\n                            { this.props.label }\n                        </div>\n                    )\n                }\n                <div className={ this.cn('box') }>\n                    { createFragment(checkboxGroupParts) }\n                </div>\n            </span>\n        );\n    }\n\n    private handleCheckboxChange = (value, checked, event) => {\n        // eslint-disable-next-line react/no-access-state-in-setstate\n        const newValue = this.props.value ? this.props.value.slice() : this.state.value.slice();\n        const changedValueIndex = newValue.findIndex((stateValue) => stateValue === value);\n\n        if (checked) {\n            newValue.push(value);\n        } else {\n            newValue.splice(changedValueIndex, 1);\n        }\n\n        this.setState({\n            value: newValue,\n        });\n\n        if (this.props.onChange) {\n            this.props.onChange(newValue, event);\n        }\n    };\n\n    private handleFocus = (event) => {\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    };\n\n    private handleBlur = (event) => {\n        if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n    };\n\n    /**\n     * Устанавливает фокус на первую чекбокс-кнопку в группе.\n     */\n    public focus() {\n        if (this.checkboxes && this.checkboxes[0]) {\n            this.checkboxes[0].focus();\n        }\n    }\n\n    /**\n     * Убирает фокус с группы чекбокс-кнопок.\n     */\n    // eslint-disable-next-line class-methods-use-this\n    public blur() {\n        if (document.activeElement instanceof HTMLElement) {\n            document.activeElement.blur();\n        }\n    }\n}\n\nexport default withTheme<CheckBoxGroupProps, CheckBoxGroup>(CheckBoxGroup);\n"]}