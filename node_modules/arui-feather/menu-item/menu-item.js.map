{"version":3,"sources":["menu-item/menu-item.tsx"],"names":[],"mappings":"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","file":"menu-item.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { createCn } from 'bem-react-classname';\nimport { withTheme } from '../cn';\n\nimport Dropdown from '../dropdown/dropdown';\nimport Link from '../link/link';\n\nexport type MenuItemProps = {\n\n    /**\n     * Тип элемента меню\n     */\n    type?: 'link' | 'dropdown' | 'block';\n\n    /**\n     * Тип ссылки, для компонента с type='link'\n     */\n    view?: 'plain' | 'underlined' | 'pseudo';\n\n    /**\n     * href ссылки, для компонента с type='link'\n     */\n    url?: string;\n\n    /**\n     * target для ссылки\n     */\n    target?: '_self' | '_blank' | '_parent' | '_top';\n\n    /**\n     * Уникальное значение элемента. Для использования в Menu\n     */\n    value?: string | number;\n\n    /**\n     * Попап для компонента с type='dropdown'\n     */\n    popup?: React.ReactNode;\n\n    /**\n     * Управление возможностью выбирать данный компонент\n     */\n    disabled?: boolean;\n\n    /**\n     * Управление состоянием выбран/не выбран компонента\n     */\n    checked?: boolean;\n\n    /**\n     * Управление видимостью компонента\n     */\n    hidden?: boolean;\n\n    /**\n     * Управление визуальным выделением компонента\n     */\n    hovered?: boolean;\n\n    /**\n     * Размер компонента\n     */\n    size?: 's' | 'm' | 'l' | 'xl';\n\n    /**\n     * Дочерние элементы `MenuItem`\n     */\n    children?: React.ReactNode;\n\n    /**\n     * Тема компонента\n     */\n    theme?: 'alfa-on-color' | 'alfa-on-white';\n\n    /**\n     * Дополнительный класс\n     */\n    className?: string;\n\n    /**\n     * Только для type='link', обработчик клика по компоненту\n     */\n    onClick?: (event?: React.MouseEvent<any>) => void;\n\n    /**\n     * Обработчик фокуса компонента\n     */\n    onFocus?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик снятия фокуса компонента\n     */\n    onBlur?: (event?: React.FocusEvent<any>) => void;\n\n    /**\n     * Обработчик события наведения курсора на элемент меню\n     */\n    onMouseEnter?: (event?: React.MouseEvent<any>) => void;\n\n    /**\n     * Обработчик события снятия курсора с элемента меню\n     */\n    onMouseLeave?: (event?: React.MouseEvent<any>) => void;\n\n    /**\n     * Идентификатор для систем автоматизированного тестирования\n     */\n    'data-test-id'?: string;\n};\n\n/**\n * Компонент элемента меню. Как правило, используется совместно с `Menu`.\n */\nexport class MenuItem extends React.PureComponent<MenuItemProps> {\n    protected cn = createCn('menu-item');\n\n    static defaultProps: Partial<MenuItemProps> = {\n        type: 'link',\n        view: 'plain',\n    };\n\n    state = {\n        hovered: false,\n        focused: false,\n    };\n\n    private root;\n\n    private control;\n\n    render() {\n        const content: any = this.props.children || this.props.value;\n        let itemElement;\n        let menuItemProps: any = {\n            ref: (root) => {\n                this.root = root;\n            },\n            'data-test-id': this.props['data-test-id'],\n        };\n\n        switch (this.props.type) {\n        case 'dropdown':\n            itemElement = (\n                <Dropdown\n                    ref={ (control) => {\n                        this.control = control;\n                    } }\n                    className={ `${this.cn('control')} ${this.cn('dropdown')}` }\n                    size={ this.props.size }\n                    theme={ this.props.theme }\n                    opened={ this.state.hovered }\n                    switcherType=\"link\"\n                    switcherText={ content }\n                    popupContent={ this.props.popup }\n                    popupProps={ {\n                        directions: ['bottom-left'],\n                        target: 'anchor',\n                    } }\n                    mode=\"hover\"\n                    onSwitcherClick={ this.handleClick }\n                    onSwitcherMouseEnter={ this.handleMouseEnter }\n                    onSwitcherMouseLeave={ this.handleMouseLeave }\n                />\n            );\n            break;\n        case 'block':\n            menuItemProps = {\n                ref: (control) => {\n                    this.root = control;\n                    this.control = control;\n                },\n                onClick: this.handleClick,\n                onMouseEnter: this.handleMouseEnter,\n                onMouseLeave: this.handleMouseLeave,\n            };\n            itemElement = <span className={ this.cn('control') }>{ content }</span>;\n\n            break;\n        case 'link':\n        default:\n            itemElement = (\n                <Link\n                    ref={ (control) => {\n                        this.control = control;\n                    } }\n                    className={ `${this.cn('control')} ${this.cn('link')}` }\n                    size={ this.props.size }\n                    theme={ this.props.theme }\n                    pseudo={ this.props.view === 'pseudo' }\n                    disabled={ this.props.disabled }\n                    checked={ this.props.checked }\n                    text={ this.props.view !== 'plain' && content }\n                    url={ this.props.url }\n                    target={ this.props.target }\n                    onClick={ this.handleClick }\n                    onFocus={ this.handleFocus }\n                    onBlur={ this.handleBlur }\n                    onMouseEnter={ this.handleMouseEnter }\n                    onMouseLeave={ this.handleMouseLeave }\n                >\n                    { this.props.view === 'plain' && content }\n                </Link>\n            );\n            break;\n        }\n\n        return (\n            <div\n                className={ this.cn({\n                    disabled: this.props.disabled,\n                    checked: this.props.checked,\n                    hidden: this.props.hidden,\n                    type: this.props.type,\n                    hovered: this.props.hovered === undefined ? this.state.hovered : this.props.hovered,\n                    focused: this.state.focused,\n                }) }\n                { ...menuItemProps }\n            >\n                { itemElement }\n            </div>\n        );\n    }\n\n    private handleClick = (event) => {\n        if (this.props.disabled) {\n            event.preventDefault();\n\n            return;\n        }\n\n        if (this.props.onClick) {\n            this.props.onClick(event);\n        }\n    };\n\n    private handleFocus = (event) => {\n        this.setState({ focused: true });\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    };\n\n    private handleBlur = (event) => {\n        this.setState({ focused: false });\n\n        if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n    };\n\n    private handleMouseEnter = (event) => {\n        this.setState({ hovered: true });\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    };\n\n    private handleMouseLeave = (event) => {\n        this.setState({ hovered: false });\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    };\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     */\n    public getNode() {\n        return this.root;\n    }\n\n    /**\n     * Устанавливает фокус на элементе меню.\n     */\n    public focus() {\n        this.control.focus();\n    }\n\n    /**\n     * Убирает фокус с элемента меню.\n     */\n    // eslint-disable-next-line class-methods-use-this\n    public blur() {\n        if (document.activeElement) {\n            (document.activeElement as HTMLElement).blur();\n        }\n    }\n}\n\nexport default withTheme<MenuItemProps, MenuItem>(MenuItem);\n"]}