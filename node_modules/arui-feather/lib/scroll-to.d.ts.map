{"version":3,"sources":["lib/scroll-to.ts"],"names":[],"mappings":"AAIA,OAAgB,EAAE,UAAU,EAAE,MAAM,WAAW,CAAC;AAGhD,aAAK,eAAe,GAAG;IACnB;;MAEE;IACF,OAAO,EAAE,MAAM,CAAC;IAChB;;MAEE;IACF,SAAS,CAAC,EAAE,WAAW,CAAC;IACxB;;MAEE;IACF,QAAQ,CAAC,EAAE,MAAM,CAAC;IAClB;;MAEE;IACF,MAAM,CAAC,EAAE,UAAU,CAAC;CACvB,CAAA;AACD;;;;EAIE;AACF,MAAM,CAAC,OAAO,UAAU,QAAQ,CAAC,EAC7B,OAAO,EACP,SAAS,EACT,QAAY,EACZ,MAAyB,GAC5B,EAAE,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,CA8CjC","file":"scroll-to.d.ts","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport easings, { EasingType } from './easings';\nimport { SCROLL_TO_EASING } from '../vars';\n\ntype ScrollToOptions = {\n    /**\n    * Цель по оси Y\n    */\n    targetY: number;\n    /**\n    * Элемент в котором скроллим\n    */\n    container?: HTMLElement;\n    /**\n    * Продолжительность анимации в миллесекундах\n    */\n    duration?: number;\n    /**\n    * Название функции плавности для анимации\n    */\n    easing?: EasingType;\n}\n/**\n* Скроллит по элементу или странице.\n* В настоящее время доступно перемещение только по оси Y.\n* TODO: Make a move on the x axis\n*/\nexport default function scrollTo({\n    targetY,\n    container,\n    duration = 0,\n    easing = SCROLL_TO_EASING,\n}: ScrollToOptions): Promise<void> {\n    const scrollY = container ? container.scrollTop : window.pageYOffset;\n    const startTime = window.performance.now();\n\n    if (duration < 0) {\n        throw new Error('Incorrect duration in options');\n    }\n\n    if (!easings[easing]) {\n        throw new Error('Incorrect easing in options');\n    }\n\n    const easingFunc = easings[easing];\n\n    return new Promise((resolve) => {\n        function scrollToTarget(y: number): void {\n            if (container) {\n                // eslint-disable-next-line no-param-reassign\n                container.scrollTop = y;\n            } else {\n                window.scrollTo(0, y);\n            }\n        }\n\n        function loop(timestamp: number): void {\n            const currentTime = Math.abs(timestamp - startTime);\n            const t = currentTime / duration;\n            const val = easingFunc(t);\n            const currentTargetY = scrollY + ((targetY - scrollY) * val);\n\n            if (t < 1) {\n                window.requestAnimationFrame(loop);\n                scrollToTarget(currentTargetY);\n            } else {\n                scrollToTarget(targetY);\n                resolve();\n            }\n        }\n\n        if (duration === 0) {\n            scrollToTarget(targetY);\n            resolve();\n        } else {\n            loop(window.performance.now());\n        }\n    });\n}\n"]}