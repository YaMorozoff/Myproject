{"version":3,"sources":["lib/scroll-to.ts"],"names":[],"mappings":";AAAA;;8DAE8D;;;;;AAE9D,sDAAgD;AAChD,gCAA2C;AAoB3C;;;;EAIE;AACF,SAAwB,QAAQ,CAAC,EAKf;QAJd,oBAAO,EACP,wBAAS,EACT,gBAAY,EAAZ,iCAAY,EACZ,cAAyB,EAAzB,qDAAyB;IAEzB,IAAM,OAAO,GAAG,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC;IACrE,IAAM,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;IAE3C,IAAI,QAAQ,GAAG,CAAC,EAAE;QACd,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;KACpD;IAED,IAAI,CAAC,iBAAO,CAAC,MAAM,CAAC,EAAE;QAClB,MAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;KAClD;IAED,IAAM,UAAU,GAAG,iBAAO,CAAC,MAAM,CAAC,CAAC;IAEnC,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO;QACvB,SAAS,cAAc,CAAC,CAAS;YAC7B,IAAI,SAAS,EAAE;gBACX,6CAA6C;gBAC7C,SAAS,CAAC,SAAS,GAAG,CAAC,CAAC;aAC3B;iBAAM;gBACH,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACzB;QACL,CAAC;QAED,SAAS,IAAI,CAAC,SAAiB;YAC3B,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC;YACpD,IAAM,CAAC,GAAG,WAAW,GAAG,QAAQ,CAAC;YACjC,IAAM,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAM,cAAc,GAAG,OAAO,GAAG,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC;YAE7D,IAAI,CAAC,GAAG,CAAC,EAAE;gBACP,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;gBACnC,cAAc,CAAC,cAAc,CAAC,CAAC;aAClC;iBAAM;gBACH,cAAc,CAAC,OAAO,CAAC,CAAC;gBACxB,OAAO,EAAE,CAAC;aACb;QACL,CAAC;QAED,IAAI,QAAQ,KAAK,CAAC,EAAE;YAChB,cAAc,CAAC,OAAO,CAAC,CAAC;YACxB,OAAO,EAAE,CAAC;SACb;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,CAAC;SAClC;IACL,CAAC,CAAC,CAAC;AACP,CAAC;AAnDD,2BAmDC","file":"scroll-to.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport easings, { EasingType } from './easings';\nimport { SCROLL_TO_EASING } from '../vars';\n\ntype ScrollToOptions = {\n    /**\n    * Цель по оси Y\n    */\n    targetY: number;\n    /**\n    * Элемент в котором скроллим\n    */\n    container?: HTMLElement;\n    /**\n    * Продолжительность анимации в миллесекундах\n    */\n    duration?: number;\n    /**\n    * Название функции плавности для анимации\n    */\n    easing?: EasingType;\n}\n/**\n* Скроллит по элементу или странице.\n* В настоящее время доступно перемещение только по оси Y.\n* TODO: Make a move on the x axis\n*/\nexport default function scrollTo({\n    targetY,\n    container,\n    duration = 0,\n    easing = SCROLL_TO_EASING,\n}: ScrollToOptions): Promise<void> {\n    const scrollY = container ? container.scrollTop : window.pageYOffset;\n    const startTime = window.performance.now();\n\n    if (duration < 0) {\n        throw new Error('Incorrect duration in options');\n    }\n\n    if (!easings[easing]) {\n        throw new Error('Incorrect easing in options');\n    }\n\n    const easingFunc = easings[easing];\n\n    return new Promise((resolve) => {\n        function scrollToTarget(y: number): void {\n            if (container) {\n                // eslint-disable-next-line no-param-reassign\n                container.scrollTop = y;\n            } else {\n                window.scrollTo(0, y);\n            }\n        }\n\n        function loop(timestamp: number): void {\n            const currentTime = Math.abs(timestamp - startTime);\n            const t = currentTime / duration;\n            const val = easingFunc(t);\n            const currentTargetY = scrollY + ((targetY - scrollY) * val);\n\n            if (t < 1) {\n                window.requestAnimationFrame(loop);\n                scrollToTarget(currentTargetY);\n            } else {\n                scrollToTarget(targetY);\n                resolve();\n            }\n        }\n\n        if (duration === 0) {\n            scrollToTarget(targetY);\n            resolve();\n        } else {\n            loop(window.performance.now());\n        }\n    });\n}\n"]}