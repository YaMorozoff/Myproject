{"version":3,"sources":["lib/match-media.ts"],"names":[],"mappings":";;;;;AAAA,0DAAmC;AAEnC,IAAM,IAAI,GAAG,EAAE,CAAC;AAChB,IAAM,WAAW,GAAG,EAAE,CAAC;AAEvB;;;;GAIG;AACH,SAAgB,aAAa,CAAC,SAAiB;IAC3C,IAAM,KAAK,GAAG,iBAAM,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC;IAE7C,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE;QACb,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC3B;SAAM;QACH,IAAI,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACvC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KAC1B;IAED,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;AACvB,CAAC;AAXD,sCAWC;AAED;;;;GAIG;AACH,SAAgB,iBAAiB,CAAC,SAAiB;IAC/C,IAAM,KAAK,GAAG,iBAAM,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC;IAE7C,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAExB,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;QACzC,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;QACnB,OAAO,WAAW,CAAC,KAAK,CAAC,CAAC;KAC7B;AACL,CAAC;AATD,8CASC","file":"match-media.js","sourcesContent":["import MqList from '../mq/mq.json';\n\nconst pool = {};\nconst refCounters = {};\n\n/**\n * Возвращает MediaQueryList для заданного media-выражения.\n *\n * @param queryProp media выражение или кастомные запросы из `src/mq/mq.json`, например `--small`.\n */\nexport function getMatchMedia(queryProp: string): MediaQueryList {\n    const query = MqList[queryProp] || queryProp;\n\n    if (pool[query]) {\n        refCounters[query] += 1;\n    } else {\n        pool[query] = window.matchMedia(query);\n        refCounters[query] = 1;\n    }\n\n    return pool[query];\n}\n\n/**\n * Удаляет MediaQueryList.\n *\n * @param queryProp media выражение\n */\nexport function releaseMatchMedia(queryProp: string): void {\n    const query = MqList[queryProp] || queryProp;\n\n    refCounters[query] -= 1;\n\n    if (pool[query] && refCounters[query] === 0) {\n        delete pool[query];\n        delete refCounters[query];\n    }\n}\n"]}