{"version":3,"sources":["attach/attach.tsx"],"names":[],"mappings":"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","file":"attach.js","sourcesContent":["/* eslint-disable jsx-a11y/control-has-associated-label */\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { createCn } from 'bem-react-classname';\nimport { withTheme } from '../cn';\n\nimport Button, { ButtonProps } from '../button/button';\nimport IconAttachment from '../icon/action/attachment';\nimport ProgressBar from '../progress-bar';\n\nconst MULTIPLE_TEXTS = ['файл', 'файла', 'файлов'];\n\n/**\n * Возвращает слово в нужном склонении.\n *\n * @param number Количество\n * @param endingList Варианты слов, например: 'день', 'дня', 'дней'\n */\nfunction getDeclension(number: number, endingList: string[]): string {\n    let endingIndex: number;\n\n    number %= 100;\n\n    if (number >= 11 && number <= 19) {\n        endingIndex = 2;\n    } else {\n        switch (number % 10) {\n        case 1:\n            endingIndex = 0;\n            break;\n        case 2:\n        case 3:\n        case 4:\n            endingIndex = 1;\n            break;\n        default:\n            endingIndex = 2;\n        }\n    }\n\n    return endingList[endingIndex];\n}\n\n/**\n * Производит поэлементное сравнение массивов.\n *\n * @param array1 Первый массив\n * @param array2 Второй массив\n */\nfunction isEqualArray(array1: unknown[], array2: unknown[]): boolean {\n    if (array1 === array2) {\n        return true;\n    }\n\n    return array1\n        && array2\n        && array1.length === array2.length\n        && array1.every((item, index) => item === array2[index]);\n}\n\nfunction isEmptyArray(value: unknown) {\n    return Array.isArray(value) && !value.length;\n}\n\nexport type AttachProps = {\n\n    /**\n     * Содержимое поля ввода, указанное по умолчанию. Принимает массив объектов типа File или null.\n     */\n    value?: File[];\n\n    /**\n     * Уникальное имя блока\n     */\n    name?: string;\n\n    /**\n     * Идентификатор компонента в DOM\n     */\n    id?: string;\n\n    /**\n     * Иконка\n     */\n    icon?: React.ReactNode;\n\n    /**\n     * Последовательность перехода между контролами при нажатии на Tab\n     */\n    tabIndex?: number;\n\n    /**\n     * Текст для случая, когда файл не загружен\n     */\n    noFileText?: string;\n\n    /**\n     * Содержимое кнопки для выбора файла\n     */\n    buttonContent?: React.ReactNode;\n\n    /**\n     * Свойства для кнопки\n     */\n    buttonProps?: ButtonProps;\n\n    /**\n     * Доступные для выбора MIME типы файлов\n     */\n    accept?: string;\n\n    /**\n     * Управление возможностью изменения значения компонента\n     */\n    disabled?: boolean;\n\n    /**\n     * Управление возможностью выбора нескольких файлов\n     */\n    multiple?: boolean;\n\n    /**\n     * Процент выполнения загрузки файла\n     */\n    progressBarPercent?: number;\n\n    /**\n     * Число символов, после которого имя файла будет обрезаться\n     */\n    maxFilenameLength?: number;\n\n    /**\n     * Размер компонента\n     */\n    size?: 's' | 'm' | 'l' | 'xl';\n\n    /**\n     * Тема компонента\n     */\n    theme?: 'alfa-on-color' | 'alfa-on-white';\n\n    /**\n     * Дополнительный класс\n     */\n    className?: string;\n\n    /**\n     * Обработчик клика по компоненту кнопки\n     */\n    onClick?: (event?: React.MouseEvent<unknown>) => void;\n\n    /**\n     * Обработчик изменения значения 'value'\n     */\n    onChange?: (value?: unknown[], event?: React.ChangeEvent<unknown>) => void;\n\n    /**\n     * Обработчик фокуса компонента\n     */\n    onFocus?: (event?: React.FocusEvent<unknown>) => void;\n\n    /**\n     * Обработчик снятия фокуса компонента\n     */\n    onBlur?: (event?: React.FocusEvent<unknown>) => void;\n\n    /**\n     * Обработчик события наведения курсора на кнопку\n     */\n    onMouseEnter?: (event?: React.MouseEvent<unknown>) => void;\n\n    /**\n     * Обработчик события снятия курсора с кнопки\n     */\n    onMouseLeave?: (event?: React.MouseEvent<unknown>) => void;\n\n    /**\n     * Идентификатор для систем автоматизированного тестирования\n     */\n    'data-test-id'?: string;\n\n};\n\ntype AttachState = {\n    focused: boolean;\n    hovered: boolean;\n    value: File[];\n};\n\n/**\n * Компонент прикрепления файлов.\n */\nexport class Attach extends React.PureComponent<AttachProps, AttachState> {\n    protected cn = createCn('attach');\n\n    static defaultProps: Partial<AttachProps> = {\n        buttonContent: 'Выберите файл',\n        size: 'm',\n        disabled: false,\n        multiple: false,\n        tabIndex: 0,\n        noFileText: 'Нет файла',\n    };\n\n    state: AttachState = {\n        focused: false,\n        hovered: false,\n        value: [],\n    };\n\n    private input: HTMLInputElement;\n\n    static getDerivedStateFromProps(nextProps: AttachProps, prevState: AttachState) {\n        const nextValue = nextProps.value || [];\n\n        if (\n            !isEmptyArray(nextValue)\n            && !isEqualArray(nextValue as unknown[], prevState.value)\n        ) {\n            return {\n                value: nextValue,\n            };\n        }\n\n        return null;\n    }\n\n    componentDidUpdate(_: AttachProps, prevState: AttachState) {\n        const nextValue = this.props.value || [];\n\n        if (!isEqualArray(nextValue as unknown[], prevState.value)) {\n            this.input.value = '';\n        }\n    }\n\n    render() {\n        return (\n            <span\n                className={ this.cn({\n                    size: this.props.size,\n                    disabled: this.props.disabled,\n                    hovered: this.state.hovered,\n                    focused: this.state.focused,\n                }) }\n                onMouseEnter={ this.handleMouseEnter }\n                onMouseLeave={ this.handleMouseLeave }\n                data-test-id={ this.props['data-test-id'] }\n            >\n                { this.renderButton() }\n                { this.renderStatusText() }\n            </span>\n        );\n    }\n\n    renderButton() {\n        const buttonProps = {\n            ...this.props.buttonProps,\n            className: this.cn('button'),\n            disabled: this.props.disabled,\n            size: this.props.size,\n            icon: this.props.icon ? this.props.icon : <IconAttachment size={ this.props.size } />,\n            focused: this.state.focused,\n        };\n\n        return (\n            <Button\n                { ...buttonProps }\n                tag=\"span\"\n                leftAddons={ (\n                    <label\n                        className={ this.cn('label') }\n                        htmlFor={ this.props.id }\n                    >\n                        <input\n                            ref={ (input) => {\n                                this.input = input;\n                            } }\n                            className={ this.cn('control') }\n                            accept={ this.props.accept }\n                            disabled={ this.props.disabled }\n                            id={ this.props.id }\n                            multiple={ this.props.multiple }\n                            name={ this.props.name }\n                            tabIndex={ -1 }\n                            type=\"file\"\n                            onChange={ this.handleInputChange }\n                        />\n                    </label>\n                ) }\n                tabIndex={ this.props.tabIndex }\n                onClick={ this.handleButtonClick }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n            >\n                { this.props.buttonContent }\n            </Button>\n        );\n    }\n\n    renderStatusText() {\n        const files = this.props.value === undefined ? this.state.value : (this.props.value || []);\n\n        if (files && files.length > 0) {\n            const content = (files.length === 1)\n                ? this.truncateFilename(files[0].name)\n                : (\n                    <abbr\n                        title={ files.map((file) => file.name).join() }\n                    >\n                        { files.length }\n                        { ' ' }\n                        { getDeclension(files.length, MULTIPLE_TEXTS) }\n                    </abbr>\n                );\n\n            return (\n                <span className={ this.cn('file') }>\n                    <span className={ this.cn('text') }>\n                        { content }\n                    </span>\n                    <button\n                        type=\"button\"\n                        className={ this.cn('clear') }\n                        onClick={ this.handleClearClick }\n                    />\n                    { typeof this.props.progressBarPercent !== 'undefined' && (\n                        <ProgressBar\n                            percent={ this.props.progressBarPercent }\n                            className={ this.cn('progress-bar') }\n                        />\n                    ) }\n                </span>\n            );\n        }\n\n        return (\n            <span className={ this.cn('no-file') }>\n                { this.props.noFileText }\n            </span>\n        );\n    }\n\n    private truncateFilename = (filename: string): string => {\n        const { maxFilenameLength } = this.props;\n\n        if (maxFilenameLength && filename.length > maxFilenameLength) {\n            const lengthOfPart: number = Math.round(maxFilenameLength / 2) - 1;\n\n            return `${filename.substr(0, lengthOfPart)}…${filename.substr(filename.length - lengthOfPart)}`;\n        }\n\n        return filename;\n    };\n\n    private handleInputChange = (event) => {\n        this.performChange(Array.from(event.target.files), event);\n    };\n\n    private handleClearClick = (event) => {\n        this.input.value = '';\n        this.performChange([], event);\n    };\n\n    private handleButtonClick = (event) => {\n        if (this.props.onClick) {\n            this.props.onClick(event);\n        }\n    };\n\n    private handleFocus = (event) => {\n        this.setState({ focused: true });\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    };\n\n    private handleBlur = (event) => {\n        this.setState({ focused: false });\n\n        if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n    };\n\n    private handleMouseEnter = (event) => {\n        this.setState({ hovered: true });\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    };\n\n    private handleMouseLeave = (event) => {\n        this.setState({ hovered: false });\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    };\n\n    /**\n     * Ставит фокус на контрол.\n     */\n    public focus() {\n        this.input.focus();\n    }\n\n    /**\n     * Убирает фокус с контрола.\n     */\n    public blur() {\n        this.input.blur();\n    }\n\n    private performChange(value, event) {\n        const shouldFireChange = !isEqualArray(value, this.state.value);\n\n        this.setState({ value }, () => {\n            if (this.props.onChange && shouldFireChange) {\n                this.props.onChange(value.length ? value : null, event);\n            }\n        });\n    }\n}\n\nexport default withTheme<AttachProps, Attach>(Attach);\n"]}